# Story 3.1: Responsive Layout

## Status

Draft

## Story

**As a** user,  
**I want** the app to work seamlessly on mobile, tablet, and desktop devices,  
**so that** I can browse crypto data comfortably from any device.

## Acceptance Criteria

1. The app provides optimal viewing experience across all device sizes (mobile: 320px-768px, tablet: 768px-1024px, desktop: 1024px+)
2. All interactive elements are appropriately sized for touch on mobile devices (minimum 44x44px)
3. Navigation and layout adapt intelligently to different screen sizes
4. Text remains readable without horizontal scrolling on all devices
5. Images and charts scale appropriately without breaking layouts
6. Performance remains optimal on mobile devices with appropriate lazy loading
7. Feature passes all responsive design tests

## Tasks / Subtasks

**ðŸš¨ CRITICAL: Commit frequently! Each checkbox completion should be a separate commit. See git workflow section at the end for the recommended commit sequence.**

- [ ] Audit existing responsive implementations (AC: 1)
  - [ ] Document current breakpoint usage across components
  - [ ] Identify components lacking proper responsive design
  - [ ] List specific mobile UX issues that need addressing
  - [ ] Create responsive design checklist for all pages
  - [ ] Test on real devices (iOS Safari, Android Chrome)

- [ ] Enhance mobile navigation pattern (AC: 1, 3)
  - [ ] Implement mobile-optimized header with hamburger menu
  - [ ] Create slide-out navigation drawer for mobile
  - [ ] Add bottom navigation bar for key actions on mobile
  - [ ] Ensure search is easily accessible on all screen sizes
  - [ ] Test touch targets meet 44x44px minimum

- [ ] Optimize coin list view for mobile (AC: 1, 2, 4)
  - [ ] Implement single-column card layout on mobile (< 640px)
  - [ ] Add horizontal swipe gestures for additional coin data
  - [ ] Optimize font sizes and spacing for mobile readability
  - [ ] Implement sticky headers for better navigation
  - [ ] Add pull-to-refresh functionality

- [ ] Enhance tablet layout (768px - 1024px) (AC: 1, 3)
  - [ ] Implement 2-column grid for coin cards on tablet
  - [ ] Optimize spacing and padding for tablet screens
  - [ ] Ensure filter controls are easily accessible
  - [ ] Test landscape and portrait orientations
  - [ ] Adjust typography scale for tablet displays

- [ ] Optimize coin detail page for mobile (AC: 1, 2, 4, 5)
  - [ ] Stack all statistics vertically on mobile
  - [ ] Implement collapsible sections for better organization
  - [ ] Ensure price chart is fully responsive
  - [ ] Optimize table layouts for narrow screens
  - [ ] Add horizontal scroll indicators where needed

- [ ] Implement responsive typography system (AC: 4)
  - [ ] Define fluid typography scale using clamp()
  - [ ] Ensure minimum readable font sizes (16px body on mobile)
  - [ ] Implement responsive line heights and spacing
  - [ ] Test readability across all breakpoints
  - [ ] Add CSS custom properties for typography scales

- [ ] Optimize images and media (AC: 5, 6)
  - [ ] Implement responsive image sizing for coin logos
  - [ ] Add proper srcset attributes for different resolutions
  - [ ] Lazy load images below the fold
  - [ ] Optimize chart rendering for mobile performance
  - [ ] Add loading placeholders for better perceived performance

- [ ] Create responsive utility classes (AC: 1, 3)
  - [ ] Define consistent spacing scale for all breakpoints
  - [ ] Create responsive padding/margin utilities
  - [ ] Implement responsive flex/grid utilities
  - [ ] Add responsive display utilities (hide/show)
  - [ ] Document utility class usage patterns

- [ ] Implement mobile-specific interactions (AC: 2, 3)
  - [ ] Add touch-friendly hover states
  - [ ] Implement swipe gestures where appropriate
  - [ ] Ensure form inputs are optimized for mobile keyboards
  - [ ] Add haptic feedback for supported devices
  - [ ] Test with mobile screen readers

- [ ] Performance optimization for mobile (AC: 6)
  - [ ] Implement code splitting for mobile-specific features
  - [ ] Reduce JavaScript bundle size for mobile
  - [ ] Optimize CSS delivery with critical path
  - [ ] Add service worker for offline capability
  - [ ] Implement progressive enhancement strategy

- [ ] Create comprehensive responsive tests (AC: 7)
  - [ ] Write viewport-based unit tests for all components
  - [ ] Add visual regression tests for key breakpoints
  - [ ] Test touch interactions and gestures
  - [ ] Verify accessibility on mobile devices
  - [ ] Test performance metrics on throttled connections
  - [ ] Cross-browser testing on real devices
  - [ ] Ensure all tests pass with `npm run test`

- [ ] Code quality verification
  - [ ] Run `npm run lint` - all linting rules must pass
  - [ ] Run `npm run format:check` - all code must be properly formatted
  - [ ] Run `npm run type-check` - TypeScript compilation must succeed
  - [ ] Lighthouse mobile score must be > 90
  - [ ] Pre-commit hooks must be working and passing

- [ ] Follow git workflow standards - COMMIT FREQUENTLY!
  - [ ] **IMPORTANT**: Commit after EACH subtask completion (see `docs/git-workflow.md`)
  - [ ] Use conventional commit format: `(type)[responsive-layout] summary`
  - [ ] Recommended commit sequence:
    - [ ] `(feat)[responsive-layout] Document current responsive implementation audit`
    - [ ] `(feat)[responsive-layout] Create mobile navigation with hamburger menu`
    - [ ] `(feat)[responsive-layout] Implement responsive coin card layouts`
    - [ ] `(feat)[responsive-layout] Add tablet-specific grid layouts`
    - [ ] `(feat)[responsive-layout] Optimize coin detail page for mobile`
    - [ ] `(feat)[responsive-layout] Implement fluid typography system`
    - [ ] `(feat)[responsive-layout] Add responsive image optimization`
    - [ ] `(feat)[responsive-layout] Create responsive utility classes`
    - [ ] `(feat)[responsive-layout] Add mobile touch interactions`
    - [ ] `(perf)[responsive-layout] Optimize performance for mobile devices`
    - [ ] `(test)[responsive-layout] Add comprehensive responsive tests`
  - [ ] Each commit must leave code in working state
  - [ ] Run quality checks before EACH commit

## Dev Notes

### Current Responsive Patterns

Based on initial audit:

- Header uses `md:` breakpoints for desktop navigation
- Coin grid uses responsive grid (`grid-cols-1 md:grid-cols-2 lg:grid-cols-3`)
- Some components already have basic responsive classes
- Filter component has responsive toggle group layout

### Tailwind Breakpoints

```css
/* Tailwind Default Breakpoints */
sm: 640px   /* Small devices */
md: 768px   /* Medium devices/tablets */
lg: 1024px  /* Large devices/desktops */
xl: 1280px  /* Extra large devices */
2xl: 1536px /* 2X large devices */
```

### Mobile-First Approach

All styles should be mobile-first:

```tsx
// Bad: Desktop-first
<div className="w-full lg:w-1/2">

// Good: Mobile-first
<div className="w-full lg:w-1/2">
```

### Responsive Component Patterns

#### Navigation Pattern

```tsx
// Mobile: Hamburger menu with slide-out drawer
// Tablet: Condensed horizontal navigation
// Desktop: Full horizontal navigation with all options
```

#### Grid Pattern

```tsx
// Mobile: Single column stack
// Tablet: 2-column grid
// Desktop: 3-4 column grid
// Wide: 4-6 column grid
```

#### Typography Scale

```tsx
// Use clamp() for fluid typography
fontSize: clamp(1rem, 2vw + 0.5rem, 1.25rem);
```

### Touch Target Guidelines

- Minimum touch target: 44x44px (iOS) / 48x48px (Android)
- Add appropriate padding to small interactive elements
- Ensure adequate spacing between touch targets

### Performance Considerations

1. **Critical CSS**: Extract and inline critical above-the-fold styles
2. **Lazy Loading**: Implement for images and below-fold content
3. **Code Splitting**: Separate mobile-specific code bundles
4. **Resource Hints**: Use preconnect/prefetch for critical resources

### Testing Devices

**Mobile Devices:**

- iPhone 14/15 (390x844)
- iPhone SE (375x667)
- Samsung Galaxy S23 (360x800)
- Pixel 7 (412x915)

**Tablets:**

- iPad (768x1024)
- iPad Pro (1024x1366)
- Surface Pro (912x1368)

**Desktop:**

- MacBook Air (1440x900)
- Standard Desktop (1920x1080)
- Wide Desktop (2560x1440)

### Accessibility Considerations

- Ensure zoom capability (no maximum-scale=1.0)
- Maintain focus indicators on all devices
- Test with mobile screen readers (VoiceOver, TalkBack)
- Ensure proper heading hierarchy on all screen sizes

### Component-Specific Notes

**Header Component:**

- Mobile: Sticky header with minimal height
- Search: Full-screen modal on mobile
- Theme toggle: Always visible

**Coin List:**

- Mobile: Vertical stack with horizontal swipe for details
- Tablet: 2-column grid
- Desktop: Multi-column grid with hover effects

**Coin Detail:**

- Mobile: Accordion-style sections
- Charts: Full-width with pan/zoom on mobile
- Stats: Vertical stack on mobile, grid on larger screens

**Filter Component:**

- Mobile: Horizontal scrollable pills or dropdown
- Desktop: Full horizontal toggle group

### Utility Classes to Create

```css
/* Responsive spacing */
.spacing-responsive {
  padding: clamp(1rem, 3vw, 2rem);
}

/* Responsive text */
.text-responsive-base {
  font-size: clamp(0.875rem, 2vw, 1rem);
}

/* Responsive containers */
.container-responsive {
  width: min(100% - 2rem, 1280px);
  margin-inline: auto;
}
```

## Testing

### Visual Regression Testing

Use Chromatic or Percy for visual regression testing across breakpoints

### Performance Testing

- Lighthouse CI for mobile performance
- WebPageTest for real device testing
- Bundle analysis for code splitting effectiveness

### Manual Testing Checklist

- [ ] Test on real iOS device (Safari)
- [ ] Test on real Android device (Chrome)
- [ ] Test with mobile keyboard open
- [ ] Test in landscape orientation
- [ ] Test with slow 3G throttling
- [ ] Test with mobile screen reader
- [ ] Test pinch-to-zoom functionality
- [ ] Test offline functionality

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2025-08-05 | 1.0     | Initial story creation | John (PM) |

## Dev Agent Record

_This section will be populated by the development agent during implementation_

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results

_This section will be populated by the QA agent after implementation review_
